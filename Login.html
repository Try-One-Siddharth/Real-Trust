<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- FIX: Added Permissions-Policy to allow FedCM for Google Sign-In -->
    <meta http-equiv="Permissions-Policy" content="identity-credentials-get=*">
    <title>Login - Real Trust</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Google Identity Services Library -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Facebook SDK for JavaScript -->
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>

    <div class="relative w-full max-w-md mx-auto">
        <!-- LOGIN FORM -->
        <div class="bg-white p-8 rounded-2xl shadow-2xl">
            <div class="flex justify-center mb-6">
                <svg width="234" height="57" viewBox="0 0 234 57" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M75.444 47.2546L69.9 37.4626H67.524V47.2546H62.484V22.1266H71.916C73.86 22.1266 75.516 22.4746 76.884 23.1706C78.252 23.8426 79.272 24.7666 79.944 25.9426C80.64 27.0946 80.988 28.3906 80.988 29.8306C80.988 31.4866 80.508 32.9866 79.548 34.3306C78.588 35.6506 77.16 36.5626 75.264 37.0666L81.276 47.2546H75.444ZM67.524 33.6826H71.736C73.104 33.6826 74.124 33.3586 74.796 32.7106C75.468 32.0386 75.804 31.1146 75.804 29.9386C75.804 28.7866 75.468 27.8986 74.796 27.2746C74.124 26.6266 73.104 26.3026 71.736 26.3026H67.524V33.6826ZM104.087 36.8506C104.087 37.5706 104.039 38.2186 103.943 38.7946H89.3625C89.4825 40.2346 89.9865 41.3626 90.8745 42.1786C91.7625 42.9946 92.8545 43.4026 94.1505 43.4026C96.0225 43.4026 97.3545 42.5986 98.1465 40.9906H103.583C103.007 42.9106 101.903 44.4946 100.271 45.7426C98.6385 46.9666 96.6345 47.5786 94.2585 47.5786C92.3385 47.5786 90.6105 47.1586 89.0745 46.3186C87.5625 45.4546 86.3745 44.2426 85.5105 42.6826C84.6705 41.1226 84.2505 39.3226 84.2505 37.2826C84.2505 35.2186 84.6705 33.4066 85.5105 31.8466C86.3505 30.2866 87.5265 29.0866 89.0385 28.2466C90.5505 27.4066 92.2905 26.9866 94.2585 26.9866C96.1545 26.9866 97.8465 27.3946 99.3345 28.2106C100.847 29.0266 102.011 30.1906 102.827 31.7026C103.667 33.1906 104.087 34.9066 104.087 36.8506ZM98.8665 35.4106C98.8425 34.1146 98.3745 33.0826 97.4625 32.3146C96.5505 31.5226 95.4345 31.1266 94.1145 31.1266C92.8665 31.1266 91.8105 31.5106 90.9465 32.2786C90.1065 33.0226 89.5905 34.0666 89.3985 35.4106H98.8665ZM106.469 37.2106C106.469 35.1946 106.865 33.4066 107.657 31.8466C108.473 30.2866 109.565 29.0866 110.933 28.2466C112.325 27.4066 113.873 26.9866 115.577 26.9866C117.065 26.9866 118.361 27.2866 119.465 27.8866C120.593 28.4866 121.493 29.2426 122.165 30.1546V27.3106H127.241V47.2546H122.165V44.3386C121.517 45.2746 120.617 46.0546 119.465 46.6786C118.337 47.2786 117.029 47.5786 115.541 47.5786C113.861 47.5786 112.325 47.1466 110.933 46.2826C109.565 45.4186 108.473 44.2066 107.657 42.6466C106.865 41.0626 106.469 39.2506 106.469 37.2106ZM122.165 37.2826C122.165 36.0586 121.925 35.0146 121.445 34.1506C120.965 33.2626 120.317 32.5906 119.501 32.1346C118.685 31.6546 117.809 31.4146 116.873 31.4146C115.937 31.4146 115.073 31.6426 114.281 32.0986C113.489 32.5546 112.841 33.2266 112.337 34.1146C111.857 34.9786 111.617 36.0106 111.617 37.2106C111.617 38.4106 111.857 39.4666 112.337 40.3786C112.841 41.2666 113.489 41.9506 114.281 42.4306C115.097 42.9106 115.961 43.1506 116.873 43.1506C117.809 43.1506 118.685 42.9226 119.501 42.4666C120.317 41.9866 120.965 41.3146 121.445 40.4506C121.925 39.5626 122.165 38.5066 122.165 37.2826ZM137.204 20.6146V47.2546H132.164V20.6146H137.204ZM165.881 22.0906V24.1786H158.897V47.2546H156.377V24.1786H149.357V22.0906H165.881ZM172.381 31.0906C172.933 29.8666 173.773 28.9186 174.901 28.2466C176.053 27.5746 177.457 27.2386 179.113 27.2386V29.8666H178.429C176.605 29.8666 175.141 30.3586 174.037 31.3426C172.933 32.3266 172.381 33.9706 172.381 36.2746V47.2546H169.861V27.5986H172.381V31.0906ZM199.931 27.5986V47.2546H197.411V43.7986C196.835 45.0226 195.947 45.9586 194.747 46.6066C193.547 47.2546 192.203 47.5786 190.715 47.5786C188.363 47.5786 186.443 46.8586 184.955 45.4186C183.467 43.9546 182.723 41.8426 182.723 39.0826V27.5986H185.207V38.7946C185.207 40.9306 185.735 42.5626 186.791 43.6906C187.871 44.8186 189.335 45.3826 191.183 45.3826C193.079 45.3826 194.591 44.7826 195.719 43.5826C196.847 42.3826 197.411 40.6186 197.411 38.2906V27.5986H199.931ZM212.453 47.5426C210.197 47.5426 208.349 47.0266 206.909 45.9946C205.493 44.9386 204.701 43.5106 204.533 41.7106H207.125C207.245 42.8146 207.761 43.7146 208.673 44.4106C209.609 45.0826 210.857 45.4186 212.417 45.4186C213.785 45.4186 214.853 45.0946 215.621 44.4466C216.413 43.7986 216.809 42.9946 216.809 42.0346C216.809 41.3626 216.593 40.8106 216.161 40.3786C215.729 39.9466 215.177 39.6106 214.505 39.3706C213.857 39.1066 212.969 38.8306 211.841 38.5426C210.377 38.1586 209.189 37.7746 208.277 37.3906C207.365 37.0066 206.585 36.4426 205.937 35.6986C205.313 34.9306 205.001 33.9106 205.001 32.6386C205.001 31.6786 205.289 30.7906 205.865 29.9746C206.441 29.1586 207.257 28.5106 208.313 28.0306C209.369 27.5506 210.569 27.3106 211.913 27.3106C214.025 27.3106 215.729 27.8506 217.025 28.9306C218.321 29.9866 219.017 31.4506 219.113 33.3226H216.593C216.521 32.1706 216.065 31.2466 215.225 30.5506C214.409 29.8306 213.281 29.4706 211.841 29.4706C210.569 29.4706 209.537 29.7706 208.745 30.3706C207.953 30.9706 207.557 31.7146 207.557 32.6026C207.557 33.3706 207.785 34.0066 208.241 34.5106C208.721 34.9906 209.309 35.3746 210.005 35.6626C210.701 35.9266 211.637 36.2266 212.813 36.5626C214.229 36.9466 215.357 37.3186 216.197 37.6786C217.037 38.0386 217.757 38.5666 218.357 39.2626C218.957 39.9586 219.269 40.8826 219.293 42.0346C219.293 43.0906 219.005 44.0386 218.429 44.8786C217.853 45.6946 217.049 46.3426 216.017 46.8226C214.985 47.3026 213.797 47.5426 212.453 47.5426ZM227.312 29.7226V41.9266C227.312 43.1266 227.54 43.9546 227.996 44.4106C228.452 44.8666 229.256 45.0946 230.408 45.0946H232.712V47.2546H230.012C228.236 47.2546 226.916 46.8466 226.052 46.0306C225.188 45.1906 224.756 43.8226 224.756 41.9266V29.7226H222.02V27.5986H224.756V22.6666H227.312V27.5986H232.712V29.7226H227.312Z" fill="#192A68"/><path d="M42.075 21.2398H49.5L24.75 0L0 21.2398H7.425L24.75 6.34834L42.075 21.2398ZM12.375 4.27156V0H4.95V10.6199L12.375 4.27156Z" fill="#192A68"/><path d="M24.75 21.24C16.9125 21.24 10.5 27.2933 10.5 34.6919C10.5 42.0904 16.9125 48.1437 24.75 48.1437C32.5875 48.1437 39 42.0904 39 34.6919C39 27.2933 32.5875 21.24 24.75 21.24ZM24.75 45.4534C18.4658 45.4534 13.35 40.6241 13.35 34.6919C13.35 28.7596 18.4658 23.9304 24.75 23.9304C31.0343 23.9304 36.15 28.7596 36.15 34.6919C36.15 40.6241 31.0343 45.4534 24.75 45.4534ZM31.2908 28.7461L21.9 37.6109L18.2092 34.1403L16.2 36.037L21.9 41.4178L33.3 30.6563L31.2908 28.7461Z" fill="#217BF4"/></svg>
            </div>
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800">Welcome Back</h1>
                <p class="text-gray-500 mt-2">Login to your Real Trust account</p>
            </div>

            <form action="#" method="POST">
                <div class="mb-4">
                    <label for="login-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                    <input type="email" id="login-email" name="email" class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="you@example.com" required>
                </div>
                <div class="mb-6">
                    <label for="login-password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                    <input type="password" id="login-password" name="password" class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="••••••••" required>
                </div>
                <div class="flex items-center justify-between mb-6">
                    <a href="https://forgot-password-real-trust.netlify.app/" class="text-sm text-blue-600 hover:underline">Forgot Password?</a>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105">Login</button>
            </form>

            <div class="mt-6">
                <div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">Or continue with</span></div></div>
                <div class="mt-6 grid grid-cols-2 gap-3">
                    
                    <!-- Google Sign-In Button Container -->
                    <div class="g_id_signin"
                         data-type="standard"
                         data-shape="rectangular"
                         data-theme="outline"
                         data-text="signin_with"
                         data-size="large"
                         data-logo_alignment="left">
                    </div>
                    
                    <!-- Facebook Login Button -->
                    <div>
                        <button id="facebook-login-btn" class="w-full inline-flex justify-center py-3 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">
                            <span class="sr-only">Sign in with Facebook</span>
                            <svg class="w-5 h-5" aria-hidden="true" fill="#1877F2" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M20 10c0-5.523-4.477-10-10-10S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <p class="mt-4 text-center text-sm text-gray-600">
                Don't have an account?
                <a href="https://singup-real-trust.netlify.app/" class="font-medium text-blue-600 hover:underline">Sign up</a>
            </p>
        </div>
    </div>

    <script>
        // --- Facebook Login ---
        window.fbAsyncInit = function() {
            // IMPORTANT: Replace 'YOUR_FACEBOOK_APP_ID' with your actual App ID.
            // You can get one from https://developers.facebook.com/
            FB.init({
              appId      : 'YOUR_FACEBOOK_APP_ID',
              cookie     : true,  // Enable cookies to allow the server to access the session.
              xfbml      : true,  // Parse social plugins on this page.
              version    : 'v19.0' // Use a specific API version.
            });

            // Attach the event listener here to ensure FB is initialized.
            document.getElementById('facebook-login-btn').addEventListener('click', loginWithFacebook);
        };

        /**
         * Initiates the Facebook Login process.
         * IMPORTANT: This function will only work on HTTPS pages as per Facebook's policy.
         * It will fail on HTTP pages.
         */
        function loginWithFacebook() {
            FB.login(function(response) {
                if (response.authResponse) {
                    console.log('Welcome! Fetching your information.... ');
                    FB.api('/me', {fields: 'name, email, picture'}, function(response) {
                        console.log('Good to see you, ' + response.name + '.');
                        console.log('Email: ' + response.email);
                        console.log('Picture URL: ' + response.picture.data.url);
                        // Here you would send the authResponse to your backend to create a session for the user.
                    });
                } else {
                    console.log('User cancelled login or did not fully authorize.');
                }
            }, {scope: 'public_profile,email'}); // Request email permission
        }


        // --- Google Login ---
        /**
         * Handles the response from Google Sign-In.
         * @param {object} response - The credential response object from Google.
         */
        function handleCredentialResponse(response) {
            const responsePayload = parseJwt(response.credential);
            console.log("Google User ID: " + responsePayload.sub);
            console.log('Full Name: ' + responsePayload.name);
            console.log('Email: ' + responsePayload.email);
            console.log("Profile Picture URL: " + responsePayload.picture);
            // IMPORTANT: For a real application, you should send this 'credential' token
            // to your backend server for verification.
        }

        /**
         * A helper function to decode the JWT token.
         * @param {string} token - The JWT token.
         * @returns {object|null}
         */
        function parseJwt (token) {
            try {
                return JSON.parse(atob(token.split('.')[1].replace(/-/g, '+').replace(/_/g, '/')));
            } catch (e) {
                return null;
            }
        }

        // --- Page Load Initializations ---
        window.onload = function () {
          // Google Sign-In Initialization
          // IMPORTANT: You must replace 'YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com' with your actual
          // Google Cloud project's client ID.
          // You can get this from the Google Cloud Console: https://console.cloud.google.com/apis/credentials
          google.accounts.id.initialize({
            client_id: "YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com",
            callback: handleCredentialResponse
          });
          
          google.accounts.id.renderButton(
            document.querySelector(".g_id_signin"),
            { theme: "outline", size: "large", text: "signin_with", shape: "rectangular", logo_alignment: "left" } 
          );
          
          // NOTE: The Facebook event listener is now attached inside fbAsyncInit to prevent race conditions.
        }
    </script>
</body>
</html>
